<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://dbanote.github.io">
  <title>一个DBA的工作学习笔记</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="一个DBA的工作学习笔记">
<meta property="og:url" content="http://dbanote.github.io/index.html">
<meta property="og:site_name" content="一个DBA的工作学习笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一个DBA的工作学习笔记">
  
    <link rel="alternative" href="/atom.xml" title="一个DBA的工作学习笔记" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.2d7529.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/img/avatar.jpg" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">刘雅君</a></h1>
		</hgroup>
		
		<p class="header-subtitle">欲事之无繁，则必劳于始而逸于终</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/archives/">归档</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="mail" target="_blank" href="mailto:9320802@qq.com" title="mail"><i class="icon-mail"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/img/avatar.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">刘雅君</h1>
			</hgroup>
			
			<p class="header-subtitle"><i class="icon icon-quo-left"></i>欲事之无繁，则必劳于始而逸于终<i class="icon icon-quo-right"></i></p>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="mail" target="_blank" href="mailto:9320802@qq.com" title="mail"><i class="icon-mail"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">主页</a></li>
		        
					<li style="width: 50%"><a href="/archives/">归档</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-tools/Sublime常用快捷键" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/30/tools/Sublime常用快捷键/">Sublime Text 常用快捷键</a>
    </h1>
  

        
        <a href="/2017/01/30/tools/Sublime常用快捷键/" class="archive-article-date">
  	<time datetime="2017-01-30T08:33:55.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-30</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Sublime-Text-常用快捷键"><a href="#Sublime-Text-常用快捷键" class="headerlink" title="Sublime Text 常用快捷键"></a>Sublime Text 常用快捷键</h1><h5 id="1、通用"><a href="#1、通用" class="headerlink" title="1、通用"></a>1、通用</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">↑ ↓ ← →             上下左右移动光标</div><div class="line">Alt                 调出菜单</div><div class="line">Ctrl + Shift + P    调出命令板（Command Palette）</div><div class="line">Ctrl + `            调出控制台</div></pre></td></tr></table></figure>
<h5 id="2、编辑"><a href="#2、编辑" class="headerlink" title="2、编辑"></a>2、编辑</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Ctrl + Enter            在当前行下面新增一行然后跳至该行</div><div class="line">Ctrl + Shift + Enter    在当前行上面增加一行并跳至该行</div><div class="line">Ctrl + ←/→              进行逐词移动</div><div class="line">Ctrl + Shift + ←/→      进行逐词选择</div><div class="line">Ctrl + ↑/↓              移动当前显示区域</div><div class="line">Ctrl + Shift + ↑/↓      移动当前行</div></pre></td></tr></table></figure>
<h5 id="3、选择"><a href="#3、选择" class="headerlink" title="3、选择"></a>3、选择</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Ctrl + D                选择当前光标所在的词并高亮该词所有出现的位置</div><div class="line">                        再次 Ctrl + D 选择该词出现的下一个位置，在多重选词的过程中</div><div class="line">                        使用 Ctrl + K 进行跳过，使用 Ctrl + U 进行回退，使用 Esc 退出多重编辑</div><div class="line">Ctrl + Shift + L        将当前选中区域打散</div><div class="line">Ctrl + J                把当前选中区域合并为一行</div><div class="line">Ctrl + M                在起始括号和结尾括号间切换</div><div class="line">Ctrl + Shift + M        快速选择括号间的内容</div><div class="line">Ctrl + Shift + J        快速选择同缩进的内容</div><div class="line">Ctrl + Shift + Space    快速选择当前作用域（Scope）的内容</div></pre></td></tr></table></figure>
<h5 id="4、查找-amp-替换"><a href="#4、查找-amp-替换" class="headerlink" title="4、查找&amp;替换"></a>4、查找&amp;替换</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">F3                  跳至当前关键字下一个位置</div><div class="line">Shift + F3          跳到当前关键字上一个位置</div><div class="line">Alt + F3            选中当前关键字出现的所有位置</div><div class="line">Ctrl + F/H          进行标准查找/替换，之后：</div><div class="line">Alt + C             切换大小写敏感（Case-sensitive）模式</div><div class="line">Alt + W             切换整字匹配（Whole matching）模式</div><div class="line">Alt + R             切换正则匹配（Regex matching）模式</div><div class="line">Ctrl + Shift + H    替换当前关键字</div><div class="line">Ctrl + Alt + Enter  替换所有关键字匹配</div><div class="line">Ctrl + Shift + F    多文件搜索&amp;替换</div></pre></td></tr></table></figure>
<h5 id="5、跳转"><a href="#5、跳转" class="headerlink" title="5、跳转"></a>5、跳转</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Ctrl + P        跳转到指定文件，输入文件名后可以：</div><div class="line">@ 符号跳转       输入@symbol跳转到symbol符号所在的位置</div><div class="line"># 关键字跳转     输入#keyword跳转到keyword所在的位置</div><div class="line">: 行号跳转       输入:12跳转到文件的第12行。</div><div class="line">Ctrl + R        跳转到指定符号</div><div class="line">Ctrl + G        跳转到指定行号</div></pre></td></tr></table></figure>
<h5 id="6、窗口"><a href="#6、窗口" class="headerlink" title="6、窗口"></a>6、窗口</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Ctrl + Shift + N    创建一个新窗口</div><div class="line">Ctrl + N            在当前窗口创建一个新标签</div><div class="line">Ctrl + W            关闭当前标签，当窗口内没有标签时会关闭该窗口</div><div class="line">Ctrl + Shift + T    恢复刚刚关闭的标签</div></pre></td></tr></table></figure>
<h5 id="7、屏幕"><a href="#7、屏幕" class="headerlink" title="7、屏幕"></a>7、屏幕</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">F11                             切换至普通全屏</div><div class="line">Shift + F11                     切换至无干扰全屏</div><div class="line">Alt+Shift+1       Single        切换至独屏</div><div class="line">Alt+Shift+2       Columns:2     切换至纵向二栏分屏</div><div class="line">Alt+Shift+3       Columns:3     切换至纵向三栏分屏</div><div class="line">Alt+Shift+4       Columns:4     切换至纵向四栏分屏</div><div class="line">Alt+Shift+8       Rows:2        切换至横向二栏分屏</div><div class="line">Alt+Shift+9       Rows:3        切换至横向三栏分屏</div><div class="line">Alt+Shift+5       Grid          切换至四格式分屏</div></pre></td></tr></table></figure>
<h5 id="8、插件”DeleteBlankLines”"><a href="#8、插件”DeleteBlankLines”" class="headerlink" title="8、插件”DeleteBlankLines”"></a>8、插件”DeleteBlankLines”</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># Windows/Linux</div><div class="line">Ctrl+Alt+Backspace          删除所有空行</div><div class="line">Ctrl+Alt+Shift+Backspace    删除多余空行</div><div class="line"></div><div class="line"># Mac OS</div><div class="line">Ctrl+Alt+Delete             删除所有空行</div><div class="line">Ctrl+Alt+Shift+Delete       删除多余空行</div></pre></td></tr></table></figure>
<h5 id="9、插件”SublimeTmpl”"><a href="#9、插件”SublimeTmpl”" class="headerlink" title="9、插件”SublimeTmpl”"></a>9、插件”SublimeTmpl”</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">ctrl+alt+h          html</div><div class="line">ctrl+alt+j          javascript</div><div class="line">ctrl+alt+c          css</div><div class="line">ctrl+alt+p          php</div><div class="line">ctrl+alt+r          ruby</div><div class="line">ctrl+alt+shift+p    python</div></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">tools</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">sublime text</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/01/30/tools/Sublime常用快捷键/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-git/git常用命令整理" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/26/git/git常用命令整理/">GIT常用命令整理</a>
    </h1>
  

        
        <a href="/2017/01/26/git/git常用命令整理/" class="archive-article-date">
  	<time datetime="2017-01-26T09:05:44.861Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-26</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="GIT常用命令整理"><a href="#GIT常用命令整理" class="headerlink" title="GIT常用命令整理"></a>GIT常用命令整理</h1><h5 id="基本信息设置与查看"><a href="#基本信息设置与查看" class="headerlink" title="基本信息设置与查看"></a>基本信息设置与查看</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">git config --global user.name &apos;dbanote&apos;</div><div class="line">git config --global user.email &apos;15004618839@139.com&apos;</div><div class="line"></div><div class="line">git config --list</div></pre></td></tr></table></figure>
<h5 id="初始化git仓库"><a href="#初始化git仓库" class="headerlink" title="初始化git仓库"></a>初始化git仓库</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">git init</div></pre></td></tr></table></figure>
<h5 id="向本地仓库中添加-修改-删除文件"><a href="#向本地仓库中添加-修改-删除文件" class="headerlink" title="向本地仓库中添加/修改/删除文件"></a>向本地仓库中添加/修改/删除文件</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># 添加/修改/删除工作区文件后，保存变动内容到暂存区</div><div class="line">git add &lt;file&gt;</div><div class="line">git add *</div><div class="line"></div><div class="line"># 查看暂存区状态</div><div class="line">git status</div><div class="line"></div><div class="line"># 暂存区内容提交到git仓库</div><div class="line">git commit -m &quot;git init&quot;</div></pre></td></tr></table></figure>
<h5 id="PUSH远程仓库"><a href="#PUSH远程仓库" class="headerlink" title="PUSH远程仓库"></a>PUSH远程仓库</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">git remote add origin git@github.com:dbanote/08_dbanote.git</div><div class="line">git push -u origin master</div></pre></td></tr></table></figure>
<h5 id="克隆远程仓库"><a href="#克隆远程仓库" class="headerlink" title="克隆远程仓库"></a>克隆远程仓库</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">git clone git@github.com:dbanote/08_dbanote.git</div></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">git</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/01/26/git/git常用命令整理/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-mysql/课程学习/02-MySQL-DBA从小白到大神实战" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/26/mysql/课程学习/02-MySQL-DBA从小白到大神实战/">MySQL DBA从小白到大神实战-02 MySQL标准化、自动化部署</a>
    </h1>
  

        
        <a href="/2017/01/26/mysql/课程学习/02-MySQL-DBA从小白到大神实战/" class="archive-article-date">
  	<time datetime="2017-01-26T06:16:32.184Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-26</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="第二课-MySQL标准化、自动化部署"><a href="#第二课-MySQL标准化、自动化部署" class="headerlink" title="第二课 MySQL标准化、自动化部署"></a>第二课 MySQL标准化、自动化部署</h1><h2 id="作业题目"><a href="#作业题目" class="headerlink" title="作业题目"></a>作业题目</h2><ol>
<li>为什么数据目录和日志目录需要分开?</li>
<li>如何标准化配置多实例?（例如：一台物理主机上部署3306与3307两个实例）</li>
<li>详细描述MySQL编译安装的过程（截图安装步骤）</li>
</ol>
<h2 id="1-为什么数据目录和日志目录需要分开"><a href="#1-为什么数据目录和日志目录需要分开" class="headerlink" title="1. 为什么数据目录和日志目录需要分开?"></a>1. 为什么数据目录和日志目录需要分开?</h2><p>这里的分开，我理解是将MySQL的数据目录和日志目录分别放到不同类型的磁盘中。<br>假设生产环境中服务器上有两种类型的磁盘，分别是SSD和SAS，SSD比SAS的响应时间要快（SSD响应时间约0.1毫秒，SAS的响应时间约10毫秒），为了更好的利用磁盘，一般会把活跃的数据放到SSD上，冷数据放到SAS磁盘上。<br>数据目录下的数据一般是随机读写的热数据，放到SSD盘中会有较高的响应速度；<br>日志目录下的日志是顺序读写的冷数据，放到SAS盘中满足写日志高吞吐量的需求。</p>
<h2 id="2-如何标准化配置多实例"><a href="#2-如何标准化配置多实例" class="headerlink" title="2. 如何标准化配置多实例?"></a>2. 如何标准化配置多实例?</h2><p>标准化配置多实例，主要是标准化每个实例的目录和内存设置，这样每个实例的参数设置也很容易达到标准化。标准化配置的MYSQL实例，方便实施监控及运维管理。<br>因一个MySQL实例最多占用64G的物理内存，所以在物理内存较高的服务器上，一般会安装多个MySQL实例，MySQL不同实例是通过端口来区别的。  </p>
<p>例如：一台64G的物理主机上部署3306与3307两个MYSQL实例  </p>
<h6 id="标准化目录："><a href="#标准化目录：" class="headerlink" title="标准化目录："></a>标准化目录：</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">实例1：</div><div class="line">/data/my3306</div><div class="line">/log/my3306</div><div class="line"></div><div class="line">实例2：</div><div class="line">/data/my3307</div><div class="line">/log/my3307</div><div class="line"></div><div class="line"># /data 目录挂载到SSD盘上</div><div class="line"># /log  目录挂载到SAS盘上</div></pre></td></tr></table></figure>
<h6 id="标准化内存："><a href="#标准化内存：" class="headerlink" title="标准化内存："></a>标准化内存：</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">实例1：</div><div class="line">15G: InnoDB buffer cache</div><div class="line">5G : mysql server层</div><div class="line"></div><div class="line">实例2：</div><div class="line">15G: InnoDB buffer cache</div><div class="line">5G : mysql server层</div><div class="line"></div><div class="line">OS:</div><div class="line">24G</div></pre></td></tr></table></figure>
<h6 id="标准化参数："><a href="#标准化参数：" class="headerlink" title="标准化参数："></a>标准化参数：</h6><p>结合标准化的目录及内存设置，设置标准化的参数</p>
<h2 id="3-详细描述MySQL编译安装的过程"><a href="#3-详细描述MySQL编译安装的过程" class="headerlink" title="3. 详细描述MySQL编译安装的过程"></a>3. 详细描述MySQL编译安装的过程</h2><h6 id="关闭防火墙和SELINUX"><a href="#关闭防火墙和SELINUX" class="headerlink" title="关闭防火墙和SELINUX"></a>关闭防火墙和SELINUX</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">service iptables status</div><div class="line">------------------------------------------------</div><div class="line">Table: filter</div><div class="line">Chain INPUT (policy ACCEPT)</div><div class="line">num  target     prot opt source               destination         </div><div class="line">1    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED </div><div class="line">2    ACCEPT     icmp --  0.0.0.0/0            0.0.0.0/0           </div><div class="line">3    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           </div><div class="line">4    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:22 </div><div class="line">5    REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited </div><div class="line"></div><div class="line">Chain FORWARD (policy ACCEPT)</div><div class="line">num  target     prot opt source               destination         </div><div class="line">1    REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited </div><div class="line"></div><div class="line">Chain OUTPUT (policy ACCEPT)</div><div class="line">num  target     prot opt source               destination         </div><div class="line">------------------------------------------------</div><div class="line"></div><div class="line">service iptables stop</div><div class="line">------------------------------------------------</div><div class="line">iptables: Setting chains to policy ACCEPT: filter          [  OK  ]</div><div class="line">iptables: Flushing firewall rules:                         [  OK  ]</div><div class="line">iptables: Unloading modules:                               [  OK  ]</div><div class="line">------------------------------------------------</div><div class="line"></div><div class="line">service iptables status</div><div class="line">------------------------------------------------</div><div class="line">iptables: Firewall is not running.</div><div class="line">------------------------------------------------</div><div class="line"></div><div class="line">chkconfig iptables off</div><div class="line"></div><div class="line">vi /etc/selinux/config</div><div class="line">------------------------------------------------</div><div class="line">SELINUX=disabled</div><div class="line">------------------------------------------------</div></pre></td></tr></table></figure>
<h6 id="配置sysctl-conf"><a href="#配置sysctl-conf" class="headerlink" title="配置sysctl.conf"></a>配置sysctl.conf</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># 查看服务器内存</div><div class="line">free</div><div class="line">------------------------------------------------</div><div class="line">             total       used       free     shared    buffers     cached</div><div class="line">Mem:       8174352     616628    7557724        172     151904     253892</div><div class="line">-/+ buffers/cache:     210832    7963520</div><div class="line">Swap:     16531452          0   16531452</div><div class="line">------------------------------------------------</div><div class="line"></div><div class="line">vi /etc/sysctl.conf</div><div class="line">------------------------------------------------</div><div class="line"># 修改</div><div class="line">kernel.shmmax = 4398046511104</div><div class="line"></div><div class="line"># 添加</div><div class="line">fs.file-max = 6815744</div><div class="line">kernel.sem = 250 32000 100 128</div><div class="line">kernel.shmmni = 4096</div><div class="line">kernel.panic_on_oops = 1</div><div class="line">net.core.rmem_default = 262144</div><div class="line">net.core.rmem_max = 4194304</div><div class="line">net.core.wmem_default = 262144</div><div class="line">net.core.wmem_max = 1048576</div><div class="line">fs.aio-max-nr = 1048576</div><div class="line">net.ipv4.ip_local_port_range = 9000 65500</div><div class="line">------------------------------------------------</div><div class="line"># kernel.shmmax算法：修改为物理内容的50%、60%</div><div class="line"># 8G:kernel.shmmax = (8G*1024*1024*1024*1024)*50% = 4398046511104</div><div class="line"></div><div class="line"># 使配置立即生效</div><div class="line">sysctl -p</div></pre></td></tr></table></figure>
<h6 id="检查是否已安装MySQL"><a href="#检查是否已安装MySQL" class="headerlink" title="检查是否已安装MySQL"></a>检查是否已安装MySQL</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">rpm -qa | grep mysql</div><div class="line">------------------------------------------------</div><div class="line">mysql-libs-5.1.73-7.el6.x86_64</div><div class="line">------------------------------------------------</div><div class="line"></div><div class="line"># 删除mysql-libs-5.1.73-7.el6.x86_64包</div><div class="line">rpm -e --nodeps mysql-libs-5.1.73-7.el6.x86_64</div></pre></td></tr></table></figure>
<h6 id="下载MySQL源码"><a href="#下载MySQL源码" class="headerlink" title="下载MySQL源码"></a>下载MySQL源码</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Download MySQL Community Server  https://dev.mysql.com/downloads/mysql/5.6.html#downloads</div><div class="line">Select Version: 5.6.35 -&gt; Select Platform: Source Code</div><div class="line">-&gt; 选择【Generic Linux (Architecture Independent), Compressed TAR Archive】下载 </div><div class="line"></div><div class="line"># 配置yum源，安装lrzsz(代替ftp上传和下载的工具)</div><div class="line">mkdir /media/disk</div><div class="line">mkdir /media/cdrom</div><div class="line">mount /dev/cdrom /media/cdrom</div><div class="line"></div><div class="line">cp -rf /media/cdrom/* /media/disk</div><div class="line">umount /media/cdrom</div><div class="line"></div><div class="line">cp /etc/yum.repos.d/public-yum-ol6.repo /etc/yum.repos.d/public-yum-ol6.repo.bak</div><div class="line">vi /etc/yum.repos.d/public-yum-ol6.repo</div><div class="line">------------------------------------------------</div><div class="line">name=Oracle Linux $releasever Latest ($basearch)</div><div class="line">baseurl=file:///media/disk/Server</div><div class="line">gpgcheck=0</div><div class="line">enabled=1</div><div class="line">------------------------------------------------</div><div class="line"></div><div class="line">yum -y install lrzsz</div><div class="line"></div><div class="line"># 上传到服务器的/u01目录下</div><div class="line">mkdir /u01</div><div class="line">cd /u01</div><div class="line">rz</div><div class="line"></div><div class="line"># 选择mysql源码包，上传</div><div class="line">rz waiting to receive.</div><div class="line">Starting zmodem transfer.  Press Ctrl+C to cancel.</div><div class="line">Transferring mysql-5.6.35.tar.gz...</div><div class="line">  100%   31413 KB    15706 KB/sec    00:00:02       0 Errors </div><div class="line"></div><div class="line">ll /u01/mysql*</div><div class="line">-rw-r--r--. 1 root root 32167628 Jan 17 11:16 /u01/mysql-5.6.35.tar.gz</div></pre></td></tr></table></figure>
<h6 id="添加MySQL用户和组"><a href="#添加MySQL用户和组" class="headerlink" title="添加MySQL用户和组"></a>添加MySQL用户和组</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">groupadd -g 501 mysql</div><div class="line">useradd -u 501 mysql -g mysql</div><div class="line">echo &quot;mysql123&quot; | passwd --stdin mysql</div><div class="line"></div><div class="line">id mysql</div><div class="line">uid=501(mysql) gid=501(mysql) groups=501(mysql)</div></pre></td></tr></table></figure>
<h6 id="配MySQL环境变量"><a href="#配MySQL环境变量" class="headerlink" title="配MySQL环境变量"></a>配MySQL环境变量</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">vi /home/mysql/.bash_profile</div><div class="line">------------------------------------------------</div><div class="line">PATH=$PATH:$HOME/bin:/u01/my3306/bin</div><div class="line">------------------------------------------------</div></pre></td></tr></table></figure>
<h6 id="创建目录及授权"><a href="#创建目录及授权" class="headerlink" title="创建目录及授权"></a>创建目录及授权</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">mkdir -p /u01/my3306/data</div><div class="line">mkdir -p /u01/my3306/log/iblog</div><div class="line">mkdir -p /u01/my3306/log/binlog</div><div class="line">mkdir -p /u01/my3306/run</div><div class="line">mkdir -p /u01/my3306/tmp</div><div class="line"></div><div class="line">chown -R mysql:mysql /u01/my3306</div><div class="line">chmod -R 755 /u01/my3306</div></pre></td></tr></table></figure>
<h6 id="解压mysql5-6"><a href="#解压mysql5-6" class="headerlink" title="解压mysql5.6"></a>解压mysql5.6</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">cd /u01</div><div class="line">tar xvpf mysql-5.6.35.tar.gz</div></pre></td></tr></table></figure>
<h6 id="安装cmake及相关依赖包"><a href="#安装cmake及相关依赖包" class="headerlink" title="安装cmake及相关依赖包"></a>安装cmake及相关依赖包</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">yum install -y  cmake gcc gcc-c++ ncurses-devel bison zlib libxml openssl</div></pre></td></tr></table></figure>
<h6 id="编译并安装"><a href="#编译并安装" class="headerlink" title="编译并安装"></a>编译并安装</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">cd /u01/mysql-5.6.35</div><div class="line"></div><div class="line">cmake \</div><div class="line">-DCMAKE_INSTALL_PREFIX=/u01/my3306 \</div><div class="line">-DINSTALL_DATADIR=/u01/my3306/data  \</div><div class="line">-DDEFAULT_CHARSET=utf8 \</div><div class="line">-DDEFAULT_COLLATION=utf8_general_ci \</div><div class="line">-DEXTRA_CHARSETS=all \</div><div class="line">-DWITH_SSL=yes \</div><div class="line">-DWITH_EMBEDDED_SERVER=1 \</div><div class="line">-DENABLED_LOCAL_INFILE=1 \</div><div class="line">-DWITH_MYISAM_STORAGE_ENGINE=1 \</div><div class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1 \</div><div class="line">-DWITH_ARCHIVE_STORAGE_ENGINE=1 \</div><div class="line">-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</div><div class="line">-DWITH_FEDERATED_STORAGE_ENGINE=1 \</div><div class="line">-DWITH_PARTITION_STORAGE_ENGINE=1 \</div><div class="line">-DMYSQL_UNIX_ADDR=/u01/my3306/run/mysql.sock \</div><div class="line">-DMYSQL_TCP_PORT=3306 \</div><div class="line">-DENABLED_LOCAL_INFILE=1 \</div><div class="line">-DSYSCONFDIR=/etc \</div><div class="line">-DWITH_READLINE=on</div><div class="line"></div><div class="line">第一次CMAKE出现错误提示</div><div class="line">---------------------------------------------------------------------------------------------</div><div class="line">CMake Error: The following variables are used in this project, but they are set to NOTFOUND.</div><div class="line">Please set them or make sure they are set and tested correctly in the CMake files:</div><div class="line">OPENSSL_INCLUDE_DIR</div><div class="line">   used as include directory in directory /u01/mysql-5.6.35/CMakeFiles/CMakeTmp</div><div class="line">---------------------------------------------------------------------------------------------</div><div class="line"></div><div class="line">安装openssl-devel包</div><div class="line">yum -y install openssl-devel</div><div class="line"></div><div class="line">重新cmake需要删除当前目录下CMakeCache.txt，然后再重新执行</div><div class="line">rm -rf CMakeCache.txt</div><div class="line"></div><div class="line">编译并安装</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<h6 id="MySQL参数配置"><a href="#MySQL参数配置" class="headerlink" title="MySQL参数配置"></a>MySQL参数配置</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">cd /u01/my3306</div><div class="line">vi my.</div><div class="line">----------------------------------------------------------</div><div class="line">[client]</div><div class="line">port=3306</div><div class="line">socket=/u01/my3306/mysql.sock</div><div class="line"></div><div class="line">[mysql]</div><div class="line">pid_file=/u01/my3306/run/mysqld.pid</div><div class="line"></div><div class="line">[mysqld]</div><div class="line">autocommit=1</div><div class="line">general_log=off</div><div class="line">explicit_defaults_for_timestamp=true</div><div class="line"></div><div class="line"># system</div><div class="line">basedir=/u01/my3306</div><div class="line">datadir=/u01/my3306/data</div><div class="line">max_allowed_packet=1g</div><div class="line">max_connections=3000</div><div class="line">max_user_connections=2800</div><div class="line">open_files_limit=65535</div><div class="line">pid_file=/u01/my3306/run/mysqld.pid</div><div class="line">port=3306</div><div class="line">server_id=101</div><div class="line">skip_name_resolve=ON</div><div class="line">socket=/u01/my3306/run/mysql.sock</div><div class="line">tmpdir=/u01/my3306/tmp</div><div class="line"></div><div class="line">#binlog</div><div class="line">log_bin=/u01/my3306/log/binlog/binlog</div><div class="line">binlog_cache_size=32768</div><div class="line">binlog_format=row</div><div class="line">expire_logs_days=7</div><div class="line">log_slave_updates=ON</div><div class="line">max_binlog_cache_size=2147483648</div><div class="line">max_binlog_size=524288000</div><div class="line">sync_binlog=100</div><div class="line"></div><div class="line">#logging</div><div class="line">log_error=/u01/my3306/log/error.log</div><div class="line">slow_query_log_file=/u01/my3306/log/slow.log</div><div class="line">log_queries_not_using_indexes=0</div><div class="line">slow_query_log=1</div><div class="line">log_slave_updates=ON</div><div class="line">log_slow_admin_statements=1</div><div class="line">long_query_time=1</div><div class="line"></div><div class="line">#relay</div><div class="line">relay_log=/u01/my3306/log/relaylog</div><div class="line">relay_log_index=/u01/my3306/log/relay.index</div><div class="line">relay_log_info_file=/u01/my3306/log/relay-log.info</div><div class="line"></div><div class="line">#slave</div><div class="line">slave_load_tmpdir=/u01/my3306/tmp</div><div class="line">slave_skip_errors=OFF</div><div class="line"></div><div class="line"></div><div class="line">#innodb</div><div class="line">innodb_data_home_dir=/u01/my3306/log/iblog</div><div class="line">innodb_log_group_home_dir=/u01/my3306/log/iblog</div><div class="line">innodb_adaptive_flushing=ON</div><div class="line">innodb_adaptive_hash_index=ON</div><div class="line">innodb_autoinc_lock_mode=1</div><div class="line">innodb_buffer_pool_instances=8</div><div class="line"></div><div class="line">#default</div><div class="line">innodb_change_buffering=inserts</div><div class="line">innodb_checksums=ON</div><div class="line">innodb_buffer_pool_size= 128M</div><div class="line">innodb_data_file_path=ibdata1:32M;ibdata2:16M:autoextend</div><div class="line">innodb_doublewrite=ON</div><div class="line">innodb_file_format=Barracuda</div><div class="line">innodb_file_per_table=ON</div><div class="line">innodb_flush_log_at_trx_commit=1</div><div class="line">innodb_flush_method=O_DIRECT</div><div class="line">innodb_io_capacity=1000</div><div class="line">innodb_lock_wait_timeout=10</div><div class="line">innodb_log_buffer_size=67108864</div><div class="line">innodb_log_file_size=1048576000</div><div class="line">innodb_log_files_in_group=4</div><div class="line">innodb_max_dirty_pages_pct=60</div><div class="line">innodb_open_files=60000</div><div class="line">innodb_purge_threads=1</div><div class="line">innodb_read_io_threads=4</div><div class="line">innodb_stats_on_metadata=OFF</div><div class="line">innodb_support_xa=ON</div><div class="line">innodb_use_native_aio=OFF</div><div class="line">innodb_write_io_threads=10</div><div class="line"></div><div class="line">[mysqld_safe]</div><div class="line">datadir=/u01/my3306/data</div><div class="line">----------------------------------------------------------</div><div class="line"></div><div class="line"># 编译后重新修改目录权限</div><div class="line">chown -R mysql:mysql /u01/my3306</div></pre></td></tr></table></figure>
<h6 id="初始化MySQL脚本"><a href="#初始化MySQL脚本" class="headerlink" title="初始化MySQL脚本"></a>初始化MySQL脚本</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">su - mysql</div><div class="line">cd /u01/my3306/scripts</div><div class="line">./mysql_install_db --defaults-file=/u01/my3306/my.cnf \</div><div class="line">--datadir=/u01/my3306/data --basedir=/u01/my3306 --user=mysql</div></pre></td></tr></table></figure>
<h6 id="启动MySQL"><a href="#启动MySQL" class="headerlink" title="启动MySQL"></a>启动MySQL</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">/u01/my3306/bin/mysqld_safe --defaults-file=/u01/my3306/my.cnf --user=mysql &amp;</div></pre></td></tr></table></figure>
<h6 id="登录MySQL"><a href="#登录MySQL" class="headerlink" title="登录MySQL"></a>登录MySQL</h6><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">mysql</div><div class="line">或者</div><div class="line">mysql -h127.0.0.1 -uroot</div><div class="line"></div><div class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</div><div class="line">Your MySQL connection id is 2</div><div class="line">Server version: 5.6.35-log Source distribution</div><div class="line"></div><div class="line">Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.</div><div class="line"></div><div class="line">Oracle is a registered trademark of Oracle Corporation and/or its</div><div class="line">affiliates. Other names may be trademarks of their respective</div><div class="line">owners.</div><div class="line"></div><div class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</div><div class="line"></div><div class="line">mysql&gt; show databases;</div><div class="line">+--------------------+</div><div class="line">| Database           |</div><div class="line">+--------------------+</div><div class="line">| information_schema |</div><div class="line">| mysql              |</div><div class="line">| performance_schema |</div><div class="line">| test               |</div><div class="line">+--------------------+</div><div class="line">4 rows in set (0.01 sec)</div></pre></td></tr></table></figure>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">mysql</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/01/26/mysql/课程学习/02-MySQL-DBA从小白到大神实战/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-mysql/课程学习/01-MySQL-DBA从小白到大神实战" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/26/mysql/课程学习/01-MySQL-DBA从小白到大神实战/">MySQL DBA从小白到大神实战-01 MySQL 高级DBA职业规划</a>
    </h1>
  

        
        <a href="/2017/01/26/mysql/课程学习/01-MySQL-DBA从小白到大神实战/" class="archive-article-date">
  	<time datetime="2017-01-26T05:54:07.005Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-26</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="第一课-MySQL-高级DBA职业规划"><a href="#第一课-MySQL-高级DBA职业规划" class="headerlink" title="第一课 MySQL 高级DBA职业规划"></a>第一课 MySQL 高级DBA职业规划</h1><h2 id="作业题目："><a href="#作业题目：" class="headerlink" title="作业题目："></a>作业题目：</h2><ol>
<li>什么是MVCC？有什么作用？</li>
<li>ACID中的I是怎么实现在的？</li>
<li>2PC在数据库中是怎么来实现的？</li>
<li>简单讲讲CAP/base/paxos算法。</li>
</ol>
<h2 id="1-什么是MVCC？有什么作用？"><a href="#1-什么是MVCC？有什么作用？" class="headerlink" title="1. 什么是MVCC？有什么作用？"></a>1. 什么是MVCC？有什么作用？</h2><p>MVCC是Multiversion Concurrency Control的缩写，中文的意思是多版本并发控制。<br>目前多数DB都采用了这一技术，比如Oracle，PostgreSQL等，但各自的实现机制不尽相同，MVCC没有一个统一的实现标准。<br>MVCC能有效降低锁的开销，虽然不同数据库实现MVCC的机制有所有同，但大都实现了非阻塞的读操作，写操作也只锁定必要的行。</p>
<h2 id="2-ACID中的I是怎么实现在的？"><a href="#2-ACID中的I是怎么实现在的？" class="headerlink" title="2. ACID中的I是怎么实现在的？"></a>2. ACID中的I是怎么实现在的？</h2><ul>
<li>A: 原子性 Atomicity</li>
<li>C: 一致性 Consistency</li>
<li>I: 隔离性 Isolation</li>
<li>D: 持久性 Durability</li>
</ul>
<p><code>I</code>的实现需要对事务进行并发控制，使事务在并发环境中相互隔离，一个事务的执行不能被其他事务干扰。也就是说，不同的事务并发操纵相同的数据时，每个事务都有各自完整的数据空间，一个事务内部的操作及使用的数据对其他并发事务是隔离的，一个事务所做的修改在终提交以前，对其他事务是不可见的。</p>
<h2 id="3-2PC在数据库中是怎么来实现的？"><a href="#3-2PC在数据库中是怎么来实现的？" class="headerlink" title="3. 2PC在数据库中是怎么来实现的？"></a>3. 2PC在数据库中是怎么来实现的？</h2><p>2PC是Two Phase Commitment Protocol的缩写，中文的意思是两阶段提交协议，用于保证属于多个数据分片上的操作的原子性。这些数据分片可能分布在不同的服务器上，2PC协议保证多台服务器上的操作要么全部成功，要么全部失败。 以ORACLE数据库为例，2PC的实现步骤如下：</p>
<h3 id="阶段一：提交事务请求（投票阶段）"><a href="#阶段一：提交事务请求（投票阶段）" class="headerlink" title="阶段一：提交事务请求（投票阶段）"></a>阶段一：提交事务请求（投票阶段）</h3><h6 id="（1）事务询问"><a href="#（1）事务询问" class="headerlink" title="（1）事务询问"></a>（1）事务询问</h6><p>协调者向所有的参与者发送事务内容，询问是否可以执行事务提交操作，并开始等待各参与者的响应</p>
<h6 id="（2）执行事务"><a href="#（2）执行事务" class="headerlink" title="（2）执行事务"></a>（2）执行事务</h6><p>各参与者节点执行事务操作，并将Undo和Redo信息计入事务日志中</p>
<h6 id="（3）各参与者向协调者反馈事务询问的响应"><a href="#（3）各参与者向协调者反馈事务询问的响应" class="headerlink" title="（3）各参与者向协调者反馈事务询问的响应"></a>（3）各参与者向协调者反馈事务询问的响应</h6><p>如果参与者成功执行了事务操作，那么就反馈给协调者Yes响应，表示事务可以执行；<br>如果参与者没有成功执行事务，那么就反馈给协调者No响应，表示事务不可以执行。</p>
<h3 id="阶段二：执行事务提交（执行阶段）"><a href="#阶段二：执行事务提交（执行阶段）" class="headerlink" title="阶段二：执行事务提交（执行阶段）"></a>阶段二：执行事务提交（执行阶段）</h3><h6 id="1-执行事务提交"><a href="#1-执行事务提交" class="headerlink" title="(1)执行事务提交"></a>(1)执行事务提交</h6><p>如果所有参与者的反馈都是Yes响应，那么</p>
<ul>
<li><p>A、发送提交请求<br>协调者向所有参与者节点发出Commit请求</p>
</li>
<li><p>B、事务提交<br>参与者接收到Commit请求后，会正式执行事务提交操作，并在完成提交之后释放在整个事务执行期间占用的事务资源</p>
</li>
<li><p>C、反馈事务提交结果<br>参与者在完成事务提交之后，向协调者发送ACK信息</p>
</li>
<li><p>D、完成事务<br>协调者接收到所有参与者反馈的ACK消息后，完成事务</p>
</li>
</ul>
<h6 id="2-中断事务"><a href="#2-中断事务" class="headerlink" title="(2)中断事务"></a>(2)中断事务</h6><p>任何一个参与者反馈了No响应，或者在等待超时之后，协调者尚无法接收到所有参与者的反馈响应，那么就会中断事务。</p>
<ul>
<li><p>A、发送回滚请求<br>协调者向所有参与者节点发出Rollback请求</p>
</li>
<li><p>B、事务回滚<br>参与者接收到rollback请求后，会利用其在阶段一中记录的Undo信息来执行事务回滚操作，并在完成回滚之后释放整个事务执行期间占用的资源</p>
</li>
<li><p>C、反馈事务回滚结果<br>参与者在完成事务回滚之后，向协调者发送ACK信息</p>
</li>
<li><p>D、中断事务<br>协调者接收到所有参与者反馈的ACK信息后，完成事务中断</p>
</li>
</ul>
<h2 id="4-简单讲讲CAP-base-paxos算法。"><a href="#4-简单讲讲CAP-base-paxos算法。" class="headerlink" title="4. 简单讲讲CAP/base/paxos算法。"></a>4. 简单讲讲CAP/base/paxos算法。</h2><h3 id="CAP定理"><a href="#CAP定理" class="headerlink" title="CAP定理"></a>CAP定理</h3><p>一个分布式系统不可能同时满足一致性(C: Consistency)、可用性(A: Availibility)和分区容错性(P: Partition tolerance)这三个基本需求，最多只能同时满足其中的两项。<br>其中分区容错性是一个最基本的要求，是一个分布式系统必然需要面对和解决的问题。系统架构设计的主要精力应放在根据业务特点在C（一致性）和A（可用性）之间寻求平衡。</p>
<h6 id="一致性"><a href="#一致性" class="headerlink" title="一致性"></a>一致性</h6><p>在分布式环境中，一致性是指数据在多个副本之间是否能够保持一致的特性。<br>CAP定理应用中的放弃一致性，是指放弃数据的强一致性，而保留数据的最终一致性。这样的系统无法保证数据保持实时的一致性，但是能够承诺的是，数据最终会达到一个一致的状态。具体多久能够达到数据一致取决于系统的设计，主要包括数据副本在不同节点之间的复制时间长短。</p>
<h6 id="可用性"><a href="#可用性" class="headerlink" title="可用性"></a>可用性</h6><p>系统提供的服务必须一直处于可用的状态，对于用户的每一个操作请求总是能够在有限的时间内返回结果。<br>CAP定理应用中的放弃可用性，是指一旦系统遇到网络分区或其他故障时，受到影响的服务需要等待一定的时间，在等待期间系统无法对外提供正常的服务，即不可用。</p>
<h6 id="分区容错性"><a href="#分区容错性" class="headerlink" title="分区容错性"></a>分区容错性</h6><p>分区容错性约束了一个分布式系统需要具有如下特性：分布式系统在遇到任何网络分区故障的时候，仍然需要能够保证对外提供满足一致性和可用性的服务，除非是整个网络环境都发生了故障。<br>对于一个分布式系统而言，分区容错性是一个最基本的要求，CAP定理应用中的放弃分区容错性，一种较为简单的做法是将所有的数据（或者仅仅是那些与事务相关的数据）都放在一个分布式节点上，这样就不会碰到由于网络分区带来的负面影响，但放弃P的同时，也就意味着放弃了系统的可扩展性。</p>
<h3 id="BASE理论"><a href="#BASE理论" class="headerlink" title="BASE理论"></a>BASE理论</h3><p>BASE是Basically Available(基本可用)、 Soft state(软状态) 和Eventually consistent(最终一致性)三个短语的简写。 BASE是对CAP中一致性和可用性权衡的结果，其来源于对大规模互联网系统分布式实践的总结，是基于CAP定理逐步演化而来的，其核心思想是即使无法做到强一致性(Strong Consistency)，但每个应用都可以根据自身的业务特点，采用适当的方式来使系统达到最终一致性(Eventually consistent)。</p>
<h6 id="基本可用"><a href="#基本可用" class="headerlink" title="基本可用"></a>基本可用</h6><p>基本可用是指分布式系统在出现不可预知故障时，允许损失部分可用性，如响应时间上的损失，部分非关键功能上的损失。  </p>
<h6 id="软状态"><a href="#软状态" class="headerlink" title="软状态"></a>软状态</h6><p>软状态和是指允许系统中的数据存在中间的状态，并认为该中间状态存在不会影响系统的整体可用性，即允许系统在不同节点的数据副本之间进行数据同步的过程存在延时。  </p>
<h6 id="最终一致性"><a href="#最终一致性" class="headerlink" title="最终一致性"></a>最终一致性</h6><p>最终一致性强调的是系统中所有的数据副本，在经过一段时间的同步后，最终能够达到一个一致的状态。BASE理论面向的是大型高可用可扩展的分布式系统，和传统事务的ACID强一致性相反，BASE是通过牺牲强一致性来获得可用性，并允许数据在一段时间内是不一致的，但最终达到一致状态。<br>在实际的分布式场景中，不同业务单元和组件对数据一致性的要求是不同的，因此在具体的分布式系统架构设计过程中，ACID特性与BASE理论往往会结合一起使用。  </p>
<h3 id="Paxos（帕克索斯）算法"><a href="#Paxos（帕克索斯）算法" class="headerlink" title="Paxos（帕克索斯）算法"></a>Paxos（帕克索斯）算法</h3><p>Paxos是基于消息传递且具有高度容错性的一致性算法。<br>算法要解决的问题就是如何在可能发生的宕机或网络异常的分布式系统中，快速且正确地在集群内部对某个数据的值达成一致，并且保证不论发生以上任何异常，都不会破坏整个系统的一致性。<br>Paxos算法引入了“过半”的理念，通俗的讲就是少数服从多数据的原则。同时，Paxos算法支持分布式节点角色之间的轮换，这极大的避免了分布式单点的出现，因此Paxos算法解决了无限期等待问题，也解决了“脑残”问题，是目前来说最优秀的分布式一致性协议之一。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">mysql</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/01/26/mysql/课程学习/01-MySQL-DBA从小白到大神实战/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-mysql/课程学习/03-MySQL-DBA从小白到大神实战" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/23/mysql/课程学习/03-MySQL-DBA从小白到大神实战/">MySQL DBA从小白到大神实战-03 深入MySQL体系结构</a>
    </h1>
  

        
        <a href="/2017/01/23/mysql/课程学习/03-MySQL-DBA从小白到大神实战/" class="archive-article-date">
  	<time datetime="2017-01-23T05:42:00.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-23</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="第三课-深入MySQL体系结构"><a href="#第三课-深入MySQL体系结构" class="headerlink" title="第三课 深入MySQL体系结构"></a>第三课 深入MySQL体系结构</h1><h2 id="1-thread-pool的原理是什么？"><a href="#1-thread-pool的原理是什么？" class="headerlink" title="1. thread pool的原理是什么？"></a>1. thread pool的原理是什么？</h2><p>线程池的原理很简单，类似于操作系统中的缓冲区的概念，它的流程如下：先启动若干数量的线程，并让这些线程都处于睡眠状态，当客户端有一个新请求时，就会唤醒线程池中的某一个睡眠线程，让它来处理客户端的这个请求，当处理完这个请求后，线程又处于睡眠状态。</p>
<p>MySQL线程池只在MariaDB，Oracle MySQL企业版中提供，Oracle MySQL社区版并不提供。</p>
<p>在传统方式下，MySQL线程调度方式有两种：每个连接一个线程(one-thread-per-connection)和所有连接一个线程（no-threads）。在实际生产中，一般用的是前者。即每当有一个客户端连接到MySQL服务器，MySQL服务器都会为该客户端创建一个单独的线程，请求结束后，销毁线程。连接数越多，则相应的线程会越多。这种方式在高并发情况下，会导致线程的频繁创建和释放。</p>
<h2 id="2-为什么用double-write就能解决page坏的问题？"><a href="#2-为什么用double-write就能解决page坏的问题？" class="headerlink" title="2. 为什么用double write就能解决page坏的问题？"></a>2. 为什么用double write就能解决page坏的问题？</h2><p>InnoDB 的Page Size一般是16KB，其数据校验也是针对这16KB来计算的，将数据写入到磁盘是以Page为单位进行操作的，mysql的page size跟系统文件的page size是不一致的，在写数据的时候, 系统并不是把整个buffer pool page一次性写到disk上，在极端情况下（比如断电）往往并不能保证这一操作的原子性，16K的数据，写入4K时，发生了系统断电/OS crash ，只有一部分写是成功的，这种情况下就是partial page write问题。</p>
<p>mysql在恢复的过程中是检查page的checksum（检验和），checksum就是pgae的最后事务号，发生partial page write问题时，page已经损坏，找不到该page中的事务号，就无法恢复（ redo里面是没有保留这个损坏page完全的镜像，就无法从REDO里恢复）。</p>
<p>为了解决 partial page write 问题 ，当mysql将脏数据flush到data file的时候, 先使用memcopy 将脏数据复制到内存中的double write buffer ，之后通过double write buffer再分2次，每次写入1MB到共享表空间，然后马上调用fsync函数，同步到磁盘上，避免缓冲带来的问题，在这个过程中，doublewrite是顺序写，开销并不大，在完成doublewrite写入后，在将double write buffer写入各表空间文件，这时是离散写入。如果发生了极端情况（断电），InnoDB再次启动后，发现了一个Page数据已经损坏，那么此时就可以从double write buffer中进行数据恢复了。</p>
<h5 id="double-write的优点是什么"><a href="#double-write的优点是什么" class="headerlink" title="double write的优点是什么?"></a>double write的优点是什么?</h5><p>double write解决了partial page write的问题，它能保证即使double write部分发生了partial page write但也能恢复。另外一个好处就是double write能减少redo log的量, 有了double write，redo log只记录了二进制的变化量，也就等同于binary log，而通过前段时间的测试确实发现，在double write关闭的情况下，redo log比binary logs要大。</p>
<h5 id="double-write的缺点是什么"><a href="#double-write的缺点是什么" class="headerlink" title="double write的缺点是什么?"></a>double write的缺点是什么?</h5><p>虽然mysql称double write是一个buffer, 但其实它是开在物理文件上的一个buffer, 其实也就是file, 所以它会导致系统有更多的fsync操作, 而我们知道硬盘的fsync性能是很慢的, 所以它会降低mysql的整体性能. 但是并不会降低到原来的50%. 这主要是因为: </p>
<ol>
<li>double write是一个连接的存储空间, 所以硬盘在写数据的时候是顺序写, 而不是随机写, 这样性能更高。 </li>
<li>另外将数据从double write buffer写到真正的segment中的时候, 系统会自动合并连接空间刷新的方式, 每次可以刷新多个pages。另外将数据从double write buffer写到真正的segment中的时候, 系统会自动合并连接空间刷新的方式, 每次可以刷新多个pages。</li>
</ol>
<h5 id="double-write在恢复的时候是如何工作的"><a href="#double-write在恢复的时候是如何工作的" class="headerlink" title="double write在恢复的时候是如何工作的?"></a>double write在恢复的时候是如何工作的?</h5><p>如果是写double write buffer本身失败，那么这些数据不会被写到磁盘，innodb此时会从磁盘载入原始的数据，然后通过innodb的事务日志来计算出正确的数据，重新写入到double write buffer。如果double write buffer写成功的话，但是写磁盘失败，innodb就不用通过事务日志来计算了，而是直接用buffer的数据再写一遍。在恢复的时候，innodb直接比较页面的checksum，如果不对的话，就从硬盘载入原始数据，再由事务日志开始推演出正确的数据，所以innodb的恢复通常需要较长的时间。</p>
<h5 id="查看是否开启double-write"><a href="#查看是否开启double-write" class="headerlink" title="查看是否开启double write"></a>查看是否开启double write</h5><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">show variables like &apos;%double%&apos;;</div><div class="line">+--------------------+-------+</div><div class="line">| Variable_name      | Value |</div><div class="line">+--------------------+-------+</div><div class="line">| innodb_doublewrite | ON    |</div><div class="line">+--------------------+-------+</div></pre></td></tr></table></figure>
<h2 id="3-InnoDB-redo-log与binlog有什么区别？有了InnoDB-redo-log为什么还要binlog"><a href="#3-InnoDB-redo-log与binlog有什么区别？有了InnoDB-redo-log为什么还要binlog" class="headerlink" title="3. InnoDB redo log与binlog有什么区别？有了InnoDB redo log为什么还要binlog?"></a>3. InnoDB redo log与binlog有什么区别？有了InnoDB redo log为什么还要binlog?</h2><ul>
<li>binlog会记录所有与MySQL数据库有关的日志记录，包括InnoDB、MyISAM、Heap等其他存储引擎的日志；而InnoDB存储引擎的redo log只记录有关该引擎本身的事务日志。</li>
<li>无论将binlog文件记录的格式设为STATEMENT还是ROW，又或是MIXED，其记录的都是关于一个事务的具体操作内容，即该日志是逻辑日志；而InnoDB存储引擎的redo log是关于每个页（page）更改的物理情况。</li>
<li>binlog文件仅在事务提交后进行写入，即只写磁盘一次，不论这时该事务多大；而在事务进行的过程中，却不断有重做日志条目（redo entry）被写入到重做日志文件中。</li>
</ul>
<p>binlog是MySQL Server层记录的日志，所有引擎产生的日志都会通过binlog进行封装；MySQL的特点就是支持多存储引擎，为了兼容绝大部分引擎来支持类似复制这样的特性，就需要采用binlog日志来用实现。简单的说，binlog 是mysqld 记录全局数据结构变化的log，用于复制和恢复；innodb redo log 是innodb 引擎自己记录事务过程的log，用于回滚和crash 恢复。</p>
<h2 id="课程笔记"><a href="#课程笔记" class="headerlink" title="课程笔记"></a>课程笔记</h2><p>1.MySQL是单进程多线程<br>2.MySQL存储引擎是可插拔的，有InnoDB，MyISAM(早期)等<br>3.存储引擎是用来处理数据库相关的CRUD的操作<br>4.CRUD是指在做计算处理时的增加(Create)、读取(Retrieve)(重新得到数据)、更新(Update)和删除(Delete)几个单词的首字母简写<br>5.存储引擎的对象是表<br>6.MySQL数据库与实例的关系是一对一的<br>7.MySQL的数据库是物理操作系统文件或其他形式文件类型的集合，实例是由数据库后台进程/线程以及一个共享内存区组成<br>8.MySQL 5.6 InnoDB架构中Buffer Pool<br><img src="/img/mysql_innodb_architecture_00.png" alt="mysql_innodb_architecture_00"><br>(1)<code>index page</code>: 数据缓存放在index page里，因MySQL数据的存储结构是Btree，所以称index page，page的概念相当于oracle中的buffer，1 page默认大小16k<br>(2)<code>data dictionary</code>: 数据字典的缓冲，其文件是存放在iblog目录下的ibdata中，如<code>/u01/my3306/log/iblog/ibdata1</code><br><img src="/img/mysql_innodb_architecture_01.png" alt="mysql_innodb_architecture_01"><br>(3)<code>lock info</code>: 行锁放在lock info中，当行锁达到一定值的时候，行锁就会升级为表锁<br>(4)<code>undo page</code>: 缓存UNDO操作，DML操作修改前镜像放到undo page中，其文件也是存放在iblog目录下的ibdata中<br>(5)<code>insert buffer page</code>: 缓存二级索引（非唯一索引，或称辅助索引）<br>(6)<code>adaptive hash index</code>: 自适应哈希索引，InnoDB存储引擎会监控对表上索引的查找，如果观察到建立哈希索引可以带来速度的提升，则建立哈希索引，所以称之为自适应（adaptive）的。自适应哈希索引通过缓冲池的B+树构造而来，因此建立的速度很快。而且不需要将整个表都建哈希索引，InnoDB存储引擎会自动根据访问的频率和模式来为某些页建立哈希索引。<br>(7)<code>Buffer Pool</code>的大小一般设置为物理内存的60%-80%，在MySQL中可以通过以下命令查询：<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">mysql&gt; show variables like &apos;%buffer_pool_size%&apos;;</div><div class="line">+-------------------------+-----------+</div><div class="line">| Variable_name           | Value     |</div><div class="line">+-------------------------+-----------+</div><div class="line">| innodb_buffer_pool_size | 134217728 |</div><div class="line">+-------------------------+-----------+</div></pre></td></tr></table></figure></p>
<p>9.<code>redo log buffer</code>: 缓存redo log，通过redo log thead写到redo log文件中存放在iblog目录下的ibdata中，如<code>/u01/my3306/log/iblog/ib_logfile0</code><br>10.查找算法：链表遍历、二分查找、Btree查找、HASH查找<br>11.当数据库关闭时，把热块保存(缓存)到文件，在打开时再从文件加载到内存里，参数和设置方法如下：<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">show variables like &apos;%dump%&apos;;</div><div class="line">+-------------------------------------+-------+</div><div class="line">| Variable_name                       | Value |</div><div class="line">+-------------------------------------+-------+</div><div class="line">| innodb_buffer_pool_dump_at_shutdown | OFF   |</div><div class="line">| innodb_buffer_pool_dump_now         | OFF   |</div><div class="line">+-------------------------------------+-------+</div><div class="line"></div><div class="line">set global innodb_buffer_pool_dump_at_shutdown=1;</div><div class="line">set global innodb_buffer_pool_dump_now=1;</div><div class="line"></div><div class="line">exit</div><div class="line"></div><div class="line"># 关闭数据库</div><div class="line">mysqladmin shutdown</div><div class="line"></div><div class="line"># 查看缓存的文件</div><div class="line">ll /u01/my3306/log/iblog/</div><div class="line">total 4145172</div><div class="line">-rw-rw----. 1 mysql mysql        884 Jan 24 17:38 ib_buffer_pool   //这个就是缓存的文件</div><div class="line">-rw-rw----. 1 mysql mysql   33554432 Jan 24 17:38 ibdata1</div><div class="line">-rw-rw----. 1 mysql mysql   16777216 Jan 24 17:38 ibdata2</div><div class="line">-rw-rw----. 1 mysql mysql 1048576000 Jan 24 17:38 ib_logfile0</div><div class="line">-rw-rw----. 1 mysql mysql 1048576000 Jan 17 17:37 ib_logfile1</div><div class="line">-rw-rw----. 1 mysql mysql 1048576000 Jan 17 17:37 ib_logfile2</div><div class="line">-rw-rw----. 1 mysql mysql 1048576000 Jan 17 17:37 ib_logfile3</div><div class="line"></div><div class="line"># 指定参数启动数据库</div><div class="line">mysqld_safe --defaults-file=/u01/my3306/my.cnf &amp;</div></pre></td></tr></table></figure></p>
<p>12.安装MySQL Utilities<br>(1)选择MySQL Utilities适合的版本下载：<a href="https://dev.mysql.com/downloads/utilities/" target="_blank" rel="external">https://dev.mysql.com/downloads/utilities/</a><br><img src="/img/mysql_utilities_download_00.png" alt="mysql_utilities_download_00"><br>(2)选择Connector/Python适合的版本下载（依赖包）：<a href="https://dev.mysql.com/downloads/connector/python/" target="_blank" rel="external">https://dev.mysql.com/downloads/connector/python/</a><br><img src="/img/mysql_utilities_download_01.png" alt="mysql_utilities_download_01"><br>(3)上传安装包到服务器/tmp目录，并安装（root用户下）<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">ll</div><div class="line">total 32836</div><div class="line">-rw-r--r--. 1 root root    258776 Jan 25 11:50 mysql-connector-python-2.1.5-1.el6.x86_64.rpm</div><div class="line">-rw-r--r--. 1 root root    892500 Jan 25 11:39 mysql-utilities-1.6.4-1.el6.noarch.rpm</div><div class="line"></div><div class="line">rpm -ivh mysql-connector-python-2.1.5-1.el6.x86_64.rpm</div><div class="line">rpm -ivh mysql-utilities-1.6.4-1.el6.noarch.rpm</div></pre></td></tr></table></figure></p>
<p>(4)MySQL Utilities–mysqlfrm<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># 以诊断模式查看表结构定义文件</div><div class="line">mysqlfrm --diagnostic user.frm</div></pre></td></tr></table></figure></p>
<p>13.查看错误日志所在位置<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">mysql&gt; show variables like &apos;%log_error%&apos;;</div><div class="line">+---------------------+---------------------------+</div><div class="line">| Variable_name       | Value                     |</div><div class="line">+---------------------+---------------------------+</div><div class="line">| binlog_error_action | IGNORE_ERROR              |</div><div class="line">| log_error           | /u01/my3306/log/error.log |  //错误日志所在位置</div><div class="line">+---------------------+---------------------------+</div></pre></td></tr></table></figure></p>
<p>14.开启慢查询<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">mysql&gt; show variables like &apos;%slow%&apos;;</div><div class="line">+---------------------------+--------------------------+</div><div class="line">| Variable_name             | Value                    |</div><div class="line">+---------------------------+--------------------------+</div><div class="line">| log_slow_admin_statements | ON                       |</div><div class="line">| log_slow_slave_statements | OFF                      |</div><div class="line">| slow_launch_time          | 2                        |</div><div class="line">| slow_query_log            | ON                       |   //开启慢查询</div><div class="line">| slow_query_log_file       | /u01/my3306/log/slow.log |   //慢查询日志位置</div><div class="line">+---------------------------+--------------------------+ </div><div class="line"></div><div class="line">mysql&gt; show variables like &apos;%query_time%&apos;;</div><div class="line">+-----------------+----------+</div><div class="line">| Variable_name   | Value    |</div><div class="line">+-----------------+----------+</div><div class="line">| long_query_time | 1.000000 |   //慢查询时间为1s</div><div class="line">+-----------------+----------+</div></pre></td></tr></table></figure></p>
<p>15.通用日志默认是不开启的（通用日志主要用在数据库审计）<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">mysql&gt; show variables like &apos;%gen%&apos;;</div><div class="line">+------------------+----------------------------+</div><div class="line">| Variable_name    | Value                      |</div><div class="line">+------------------+----------------------------+</div><div class="line">| general_log      | OFF                        |</div><div class="line">| general_log_file | /u01/my3306/data/mysql.log |</div><div class="line">+------------------+----------------------------+</div></pre></td></tr></table></figure></p>
<p>16.最大用户连接数<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">mysql&gt; show variables like &apos;%max_user_connect%&apos;;</div><div class="line">+----------------------+-------+</div><div class="line">| Variable_name        | Value |</div><div class="line">+----------------------+-------+</div><div class="line">| max_user_connections | 2800  |</div><div class="line">+----------------------+-------+</div></pre></td></tr></table></figure></p>
<p>17.查出mysqld进程号为27507<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">ps -ef | grep 3306</div><div class="line"></div><div class="line">root      5475  5183  0 11:44 pts/1    00:00:00 grep 3306</div><div class="line">mysql    26656     1  0 Jan17 ?        00:00:00 /bin/sh /u01/my3306/bin/mysqld_safe --defaults-file=/u01/my3306/my.cnf --user=mysql</div><div class="line">mysql    27507 26656  0 Jan17 ?        00:01:32 /u01/my3306/bin/mysqld --defaults-file=/u01/my3306/my.cnf --basedir=/u01/my3306 --datadir=/u01/my3306/data --plugin-dir=/u01/my3306/lib/plugin --log-error=/u01/my3306/log/error.log --open-files-limit=65535 --pid-file=/u01/my3306/run/mysqld.pid --socket=/u01/my3306/run/mysql.sock --port=3306</div></pre></td></tr></table></figure></p>
<p>18.查看mysqld进程27507下所有线程<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">pstack 27507</div><div class="line"></div><div class="line">Thread 28 (Thread 0x7f9b070c4700 (LWP 27508)):</div><div class="line">#0  0x00000038a040b68c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0</div><div class="line">#1  0x00000000009536bb in os_event_wait_low(os_event*, long) ()</div><div class="line">#2  0x0000000000950aa6 in os_aio_simulated_handle(unsigned long, fil_node_t**, void**, unsigned long*) ()</div><div class="line">#3  0x0000000000a49ed7 in fil_aio_wait(unsigned long) ()</div><div class="line">#4  0x00000000009b9638 in io_handler_thread ()</div><div class="line">#5  0x00000038a0407aa1 in start_thread () from /lib64/libpthread.so.0</div><div class="line">#6  0x00000038a00e8aad in clone () from /lib64/libc.so.6</div><div class="line"># ...... 中间略过</div><div class="line">Thread 1 (Thread 0x7f9b18f637e0 (LWP 27507)):</div><div class="line">#0  0x00000038a00df283 in poll () from /lib64/libc.so.6</div><div class="line">#1  0x0000000000585284 in handle_connections_sockets() ()</div><div class="line">#2  0x000000000058cd51 in mysqld_main(int, char**) ()</div><div class="line">#3  0x00000038a001ed1d in __libc_start_main () from /lib64/libc.so.6</div><div class="line">#4  0x000000000057dbc1 in _start ()</div></pre></td></tr></table></figure></p>
<p>19.read/write thread<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">mysql&gt; show variables like &apos;%io_thread%&apos;;</div><div class="line">+-------------------------+-------+</div><div class="line">| Variable_name           | Value |</div><div class="line">+-------------------------+-------+</div><div class="line">| innodb_read_io_threads  | 4     |     # 预读</div><div class="line">| innodb_write_io_threads | 10    |</div><div class="line">+-------------------------+-------+</div></pre></td></tr></table></figure></p>
<p>20.purge thread: 清undo page<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">mysql&gt; show variables like &apos;%purge%&apos;;</div><div class="line">+----------------------------+-------+</div><div class="line">| Variable_name              | Value |</div><div class="line">+----------------------------+-------+</div><div class="line">| gtid_purged                |       |</div><div class="line">| innodb_max_purge_lag       | 0     |</div><div class="line">| innodb_max_purge_lag_delay | 0     |</div><div class="line">| innodb_purge_batch_size    | 300   |</div><div class="line">| innodb_purge_threads       | 1     |</div><div class="line">| relay_log_purge            | ON    |</div><div class="line">+----------------------------+-------+</div></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">mysql</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/01/23/mysql/课程学习/03-MySQL-DBA从小白到大神实战/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 刘雅君
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="./",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var e=/\/|index.html/g;return t.replace(e,"")===n.replace(e,"")}function i(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,e=0,r=t.length;e<r;e++){var i=t[e];o(n,i.getAttribute("href"))&&(0,d.default)(i,"active")}}function u(t){for(var n=t.offsetLeft,e=t.offsetParent;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n}function f(t){for(var n=t.offsetTop,e=t.offsetParent;null!==e;)n+=e.offsetTop,e=e.offsetParent;return n}function c(t,n,e,r,o){var i=u(t),c=f(t)-n;if(c-e<=o){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,h.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(e||c)+"px",a.style.left=i+"px",a.style.zIndex=r||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");c(t,document.body.scrollTop,-63,2,0),c(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}function l(){x.default.versions.mobile&&window.screen.width<800&&(i(),s())}var p=e(71),d=r(p),v=e(72),y=(r(v),e(84)),h=r(y),b=e(69),x=r(b),m=e(75),g=r(m),w=e(70);l(),(0,w.addLoadEvent)(function(){g.default.init()}),t.exports={}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(49),o=e(15);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=!e(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(6),o=e(12);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(10),o=e(30),i=e(24),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(22)("wks"),o=e(13),i=e(1).Symbol,u="function"==typeof i,f=t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))};f.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(35),o=e(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(6).f,o=e(2),i=e(7)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){var r=e(22)("keys"),o=e(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){var r=e(1),o=e(14),i=e(18),u=e(26),f=e(6).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||f(n,t,{value:u.f(t)})}},function(t,n,e){n.f=e(7)},function(t,n,e){var r=e(1),o=e(14),i=e(46),u=e(5),f="prototype",c=function(t,n,e){var a,s,l,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,h=t&c.B,b=t&c.W,x=d?o:o[n]||(o[n]={}),m=x[f],g=d?r:v?r[n]:(r[n]||{})[f];d&&(e=n);for(a in e)s=!p&&g&&void 0!==g[a],s&&a in x||(l=s?g[a]:e[a],x[a]=d&&"function"!=typeof g[a]?e[a]:h&&s?i(l,r):b&&g[a]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[f]=t[f],n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((x.virtual||(x.virtual={}))[a]=l,t&c.R&&m&&!m[a]&&u(m,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(11),o=e(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){t.exports=!e(4)&&!e(8)(function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){"use strict";var r=e(18),o=e(27),i=e(36),u=e(5),f=e(2),c=e(17),a=e(51),s=e(20),l=e(58),p=e(7)("iterator"),d=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",h="values",b=function(){return this};t.exports=function(t,n,e,x,m,g,w){a(e,n,x);var O,S,_,j=function(t){if(!d&&t in A)return A[t];switch(t){case y:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",E=m==h,M=!1,A=t.prototype,T=A[p]||A[v]||m&&A[m],L=T||j(m),N=m?E?j("entries"):L:void 0,C="Array"==n?A.entries||T:T;if(C&&(_=l(C.call(new t)),_!==Object.prototype&&(s(_,P,!0),r||f(_,p)||u(_,p,b))),E&&T&&T.name!==h&&(M=!0,L=function(){return T.call(this)}),r&&!w||!d&&!M&&A[p]||u(A,p,L),c[n]=L,c[P]=b,m)if(O={values:E?L:j(h),keys:g?L:j(y),entries:N},w)for(S in O)S in A||i(A,S,O[S]);else o(o.P+o.F*(d||M),n,O);return O}},function(t,n,e){var r=e(10),o=e(55),i=e(16),u=e(21)("IE_PROTO"),f=function(){},c="prototype",a=function(){var t,n=e(29)("iframe"),r=i.length,o="<",u=">";for(n.style.display="none",e(48).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+u+"document.F=Object"+o+"/script"+u),t.close(),a=t.F;r--;)delete a[c][i[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f[c]=r(t),e=new f,f[c]=null,e[u]=t):e=a(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35),o=e(16).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(2),o=e(3),i=e(45)(!1),u=e(21)("IE_PROTO");t.exports=function(t,n){var e,f=o(t),c=0,a=[];for(e in f)e!=u&&r(f,e)&&a.push(e);for(;n.length>c;)r(f,e=n[c++])&&(~i(a,e)||a.push(e));return a}},function(t,n,e){t.exports=e(5)},function(t,n,e){var r=e(15);t.exports=function(t){return Object(r(t))}},function(t,n,e){t.exports={default:e(41),__esModule:!0}},function(t,n,e){t.exports={default:e(42),__esModule:!0}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=e(39),i=r(o),u=e(38),f=r(u),c="function"==typeof f.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":typeof t};n.default="function"==typeof f.default&&"symbol"===c(i.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,n,e){e(65),e(63),e(66),e(67),t.exports=e(14).Symbol},function(t,n,e){e(64),e(68),t.exports=e(26).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,e){var r=e(3),o=e(61),i=e(60);t.exports=function(t){return function(n,e,u){var f,c=r(n),a=o(c.length),s=i(u,a);if(t&&e!=e){for(;a>s;)if(f=c[s++],f!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(43);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(9),o=e(34),i=e(19);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,f=e(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&n.push(u);return n}},function(t,n,e){t.exports=e(1).document&&document.documentElement},function(t,n,e){var r=e(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){"use strict";var r=e(32),o=e(12),i=e(20),u={};e(5)(u,e(7)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){var r=e(9),o=e(3);t.exports=function(t,n){for(var e,i=o(t),u=r(i),f=u.length,c=0;f>c;)if(i[e=u[c++]]===n)return e}},function(t,n,e){var r=e(13)("meta"),o=e(11),i=e(2),u=e(6).f,f=0,c=Object.isExtensible||function(){return!0},a=!e(8)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:"O"+ ++f,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},p=function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},d=function(t){return a&&v.NEED&&c(t)&&!i(t,r)&&s(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,n,e){var r=e(6),o=e(10),i=e(9);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),f=u.length,c=0;f>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(19),o=e(12),i=e(3),u=e(24),f=e(2),c=e(30),a=Object.getOwnPropertyDescriptor;n.f=e(4)?a:function(t,n){if(t=i(t),n=u(n,!0),c)try{return a(t,n)}catch(t){}if(f(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),o=e(33).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?f(t):o(r(t))}},function(t,n,e){var r=e(2),o=e(37),i=e(21)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){var r=e(23),o=e(15);t.exports=function(t){return function(n,e){var i,u,f=String(o(n)),c=r(e),a=f.length;return c<0||c>=a?t?"":void 0:(i=f.charCodeAt(c),i<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return t=r(t),t<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(44),o=e(52),i=e(17),u=e(3);t.exports=e(31)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,e):"values"==n?o(0,t[e]):o(0,[e,t[e]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){},function(t,n,e){"use strict";var r=e(59)(!0);e(31)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,e){"use strict";var r=e(1),o=e(2),i=e(4),u=e(27),f=e(36),c=e(54).KEY,a=e(8),s=e(22),l=e(20),p=e(13),d=e(7),v=e(26),y=e(25),h=e(53),b=e(47),x=e(50),m=e(10),g=e(3),w=e(24),O=e(12),S=e(32),_=e(57),j=e(56),P=e(6),E=e(9),M=j.f,A=P.f,T=_.f,L=r.Symbol,N=r.JSON,C=N&&N.stringify,k="prototype",F=d("_hidden"),q=d("toPrimitive"),I={}.propertyIsEnumerable,B=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),H=Object[k],K="function"==typeof L,R=r.QObject,J=!R||!R[k]||!R[k].findChild,U=i&&a(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=M(H,n);r&&delete H[n],A(t,n,e),r&&t!==H&&A(H,n,r)}:A,G=function(t){var n=D[t]=S(L[k]);return n._k=t,n},$=K&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},z=function(t,n,e){return t===H&&z(W,n,e),m(t),n=w(n,!0),m(e),o(D,n)?(e.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),e=S(e,{enumerable:O(0,!1)})):(o(t,F)||A(t,F,O(1,{})),t[F][n]=!0),U(t,n,e)):A(t,n,e)},Y=function(t,n){m(t);for(var e,r=b(n=g(n)),o=0,i=r.length;i>o;)z(t,e=r[o++],n[e]);return t},Q=function(t,n){return void 0===n?S(t):Y(S(t),n)},X=function(t){var n=I.call(this,t=w(t,!0));return!(this===H&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,F)&&this[F][t])||n)},V=function(t,n){if(t=g(t),n=w(n,!0),t!==H||!o(D,n)||o(W,n)){var e=M(t,n);return!e||!o(D,n)||o(t,F)&&t[F][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=T(g(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==F||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===H,r=T(e?W:g(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(H,n)||i.push(D[n]);return i};K||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===H&&n.call(W,e),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),U(this,t,O(1,e))};return i&&J&&U(H,t,{configurable:!0,set:n}),G(t)},f(L[k],"toString",function(){return this._k}),j.f=V,P.f=z,e(33).f=_.f=Z,e(19).f=X,e(34).f=tt,i&&!e(18)&&f(H,"propertyIsEnumerable",X,!0),v.f=function(t){return G(d(t))}),u(u.G+u.W+u.F*!K,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)d(nt[et++]);for(var nt=E(d.store),et=0;nt.length>et;)y(nt[et++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if($(t))return h(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),u(u.S+u.F*!K,"Object",{create:Q,defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&u(u.S+u.F*(!K||a(function(){var t=L();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return n=r[1],"function"==typeof n&&(e=n),!e&&x(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!$(n))return n}),r[1]=n,C.apply(N,r)}}}),L[k][q]||e(5)(L[k],q,L[k].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){e(25)("asyncIterator")},function(t,n,e){e(25)("observable")},function(t,n,e){e(62);for(var r=e(1),o=e(5),i=e(17),u=e(7)("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,n){"use strict";var e={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,weixin:t.indexOf("MicroMessenger")==-1}}()};t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=e(40),i=r(o),u=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):o[t]||t}function n(t){return l[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,r=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},f=/\u00a0/g,c=/<br\s*\/?>/gi,a=/\r?\n/g,s=/\s/g,l={};for(var p in o)l[o[p]]=p;return o["&apos;"]="'",l["'"]="&#39;",{encode:function(t){return t?(""+t).replace(r,n).replace(a,"<br/>").replace(s,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(c,"\n").replace(e,t).replace(f," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e+=2)n.push(String.fromCharCode("0x"+t.slice(e,e+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,e=t.length;e>n;n++)t[n]=u.encodeObject(t[n]);else if("object"==("undefined"==typeof t?"undefined":(0,i.default)(t)))for(var r in t)t[r]=u.encodeObject(t[r]);else if("string"==typeof t)return u.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=u},function(t,n){function e(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=e},function(t,n){function e(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(e," ")}}t.exports=e},,,function(t,n){"use strict";function e(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){var n=document.querySelectorAll(".article-entry a:not(.article-more-a)");n.forEach(function(t){t.setAttribute("target","_blank")})}var e=document.querySelector("#js-aboutme");e&&0!==e.length&&(e.innerHTML=e.innerText)}t.exports={init:e}},,,,,,,,,function(t,n){function e(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var e=t.nextSibling;return e?t.parentNode.insertBefore(n,e):t.parentNode.appendChild(n)}t.exports=e}])</script><script src="/./main.2d7529.js"></script><script>!function(){var e=function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)};e("/slider.885efe.js")}()</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 50%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
        
      
      <li style="width: 50%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">tools</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">sublime text</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">git</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">mysql</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">DBA&lt;br&gt;&lt;br&gt;工作学习笔记&lt;br&gt;谢谢大家</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>